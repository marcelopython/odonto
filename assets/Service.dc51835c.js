var $=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var v=(r,e,t)=>e in r?$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e)=>{for(var t in e||(e={}))N.call(e,t)&&v(r,t,e[t]);if(x)for(var t of x(e))U.call(e,t)&&v(r,t,e[t]);return r},_=(r,e)=>V(r,E(e));import{_ as D}from"./PageWrapper.6420503f.js";import{_ as y,G as w,S as k,j as d,k as u,l as a,w as h,U as f,Z as T,E as g,F as O,R as P,c as I,B as m,u as q,f as z,e as b,W as F,V as L,r as j,m as i,n as c,q as Y,b as A}from"./index.e62267ef.js";import{P as C,h as H}from"./moment.c32dae88.js";import{B as K}from"./Modal.5f794cae.js";const G={class:"relative overflow-x-auto shadow-md sm:rounded-lg p-2"},R={key:0,class:"flex"},W={class:"mb-6"},Z=a("label",{for:"search",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Buscar",-1),J={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},Q=a("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[a("tr",null,[a("th",{scope:"col",class:"px-6 py-3"},"Nome"),a("th",{scope:"col",class:"px-6 py-3"},"Valor"),a("th",{scope:"col",class:"px-6 py-3"},"Valor Min."),a("th",{scope:"col",class:"px-6 py-3"},"Data"),a("th",{scope:"col",class:"px-6 py-3"},[a("span",{class:"sr-only"},"Edit")])])],-1),X={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},ae={class:"px-6 py-4"},re=a("td",{class:"px-6 py-4 text-right"},[a("a",{href:"#",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Edit")],-1),se=new k,oe={props:{load:{default:!1}},data(){return{dataservice:[],search:""}},components:{Buttons:y,Pagination:C},watch:{load:function(){this.load&&this.services()}},computed:_(p({},w(["permission"])),{getAnddress:function(){return(r,e=!0)=>{let t=r.neighborhood+" - "+r.street+" - "+r.number;return t.length>20&&e?t.slice(0,20)+"...":t}},formatMoney:function(){return r=>Number(r).toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}}),methods:{searchService(){setTimeout(()=>{this.services()},500)},async services(r="1"){let e="";r.url?e="service?page="+r.url.split("?page=")[1]:e="service?page="+r;let t="";return this.search.split("+").length>1?t=this.search.split("+")[1]:t=this.search,await se.get(e+"&search="+t).then(s=>{this.dataservice=s.data})},tooltipAddress(){const r=document.getElementsByClassName("tooltip-address"),e=document.getElementsByClassName("content-address"),t={placement:"bottom",triggerType:"hover"};[...r].forEach((s,n)=>{new Tooltip(s,e[n],t)})},async paginate(r){await this.services(r),this.tooltipAddress()}},async mounted(){this.permission("service.read")&&this.paginate(1)}},M=Object.assign(oe,{name:"Index",setup(r){return(e,t)=>(d(),u("div",G,[e.permission("service.read")?(d(),u("div",R,[a("div",W,[Z,h(a("input",{type:"search",onKeyup:t[0]||(t[0]=(...s)=>e.searchService&&e.searchService(...s)),"onUpdate:modelValue":t[1]||(t[1]=s=>T(search)?search.value=s:null),id:"search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,544),[[f,e.search]])])])):g("",!0),a("table",J,[Q,a("tbody",null,[(d(!0),u(O,null,P(e.dataservice.data,s=>(d(),u("tr",{class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",key:s.id},[a("th",X,m(s.name),1),a("td",ee,[a("span",null,m(e.formatMoney(s.amount)),1)]),a("td",te,[a("span",null,m(e.formatMoney(s.amount_min)),1)]),a("td",ae,[a("span",null,m(q(H)(s.created_at).format("DD/MM/YYYY")),1)]),re]))),128))])]),I(C,{onChangePage:e.paginate,links:e.dataservice.links},null,8,["onChangePage","links"])]))}}),le=new k,de={props:{load:{default:!0}},components:{Buttons:y,BaseModal:K},data(){return{data:{name:null,amount:"0,00",amount_min:"0,00",description:null},dataClassModal:null}},watch:{load:function(){this.load&&this.showModal()}},computed:{},methods:{formatarMoeda(r){var e=r.target,t=e.value;t=t+"",t=parseInt(t.replace(/[\D]+/g,"")),t=t+"",t=t.replace(/([0-9]{2})$/g,",$1"),t.length>6&&(t=t.replace(/([0-9]{3}),([0-9]{2}$)/g,".$1,$2")),e.value=t,t=="NaN"&&(e.value="")},validation(){if(this.data.amount_min=document.getElementById("amount_min").value,this.data.amount=document.getElementById("amount").value,this.data.name)if(this.data.amount){if(!this.data.amount_min)return b({text:"Valor m\xEDnimo \xE9 obrigat\xF3rio!",title:"Servi\xE7o"}),!1}else return b({text:"Valor \xE9 obrigat\xF3rio!",title:"Servi\xE7o"}),!1;else return b({text:"Nome \xE9 obrigat\xF3rio!",title:"Servi\xE7o"}),!1;return!0},createOrUpdate(){if(!this.validation())return!1;this.create()},async create(){try{(await le.post("service",this.data)).data.id&&(this.dataClassModal.hide(),this.$emit("createOrUpdate"),F({text:"Servi\xE7o cadastrado com sucesso.",title:"Paciente"}))}catch(r){console.log(r),r.response.status!==422&&L({text:"Falha inesperada ao finalizar cadastro.",title:"Paciente"})}},modal(){const r=document.getElementById("modal-service"),e={placement:"bottom-left",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",onHide:()=>{},onShow:()=>{this.data={name:null,amount:null,amount_min:null,description:null}},onToggle:()=>{console.log("modal has been toggled")}};return new Modal(r,e)},showModal(){this.dataClassModal=this.modal(),this.dataClassModal.show()},cancel(){this.dataClassModal.hide(),this.$emit("cancel")}}},ne={class:"mb-6",style:{display:"flex","justify-content":"space-between"}},ie={style:{width:"35%"}},ce=a("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Nome ",-1),ue={style:{width:"35%"}},me=a("label",{for:"amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Valor ",-1),ge={style:{width:"25%"}},pe=a("label",{for:"amount_min",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Valor m\xEDnimo ",-1),be={class:"mb-6"},he=a("label",{for:"description",class:"block mb-2 text-sm font-medium"},"Descri\xE7\xE3o",-1),fe={class:"flex items-center p-6 space-x-2 rounded-b border-t border-gray-200 dark:border-gray-600 mt-5"};function ye(r,e,t,s,n,l){const S=j("BaseModal");return d(),i(S,{size:"smal",id:"modal-service",title:"Cadastrar servi\xE7o",onModalHide:l.cancel},{body:c(()=>[a("form",null,[a("div",ne,[a("div",ie,[ce,h(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.data.name=o),type:"text",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[f,n.data.name]])]),a("div",ue,[me,a("input",{type:"tel",onKeyup:e[1]||(e[1]=(...o)=>l.formatarMoeda&&l.formatarMoeda(...o)),id:"amount",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,32)]),a("div",ge,[pe,a("input",{onKeyup:e[2]||(e[2]=(...o)=>l.formatarMoeda&&l.formatarMoeda(...o)),type:"text",id:"amount_min",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,32)])]),a("div",be,[he,h(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.data.description=o),id:"description",rows:"2",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[f,n.data.description]])])])]),footer:c(()=>[a("div",fe,[a("button",{"data-modal-toggle":"extralarge-modal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:e[4]||(e[4]=(...o)=>l.createOrUpdate&&l.createOrUpdate(...o))}," Cadastrar "),a("button",{"data-modal-toggle":"extralarge-modal",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",onClick:e[5]||(e[5]=(...o)=>l.cancel&&l.cancel(...o))}," Voltar ")])]),_:1},8,["onModalHide"])}var B=z(de,[["render",ye]]);const ke={class:"p-4 sm:p-6"},xe=a("h2",{class:"text-xl font-semibold leading-tight"},"Servi\xE7os",-1),ve=A(" Cadastar Servi\xE7o ");new k;const _e={components:{Index:M,Create:B},data(){return{inCreate:!1,loadCreate:!1,loadList:!1}},computed:p({},w(["permission"])),methods:{modalService(){this.loadCreate=!0},create(){this.inCreate=!1,this.loadCreate=!1,this.loadList=!0},returnCreate(){this.inCreate=!1,this.loadCreate=!1}}},$e=Object.assign(_e,{name:"Service",setup(r){return(e,t)=>(d(),i(D,{title:"Servi\xE7os"},{header:c(()=>[a("div",ke,[xe,e.permission("service.create")?(d(),i(y,{key:0,variant:"info",class:Y("float-right mb-3"),onClick:e.modalService},{default:c(()=>[ve]),_:1},8,["onClick"])):g("",!0)])]),default:c(()=>[e.permission("service.read")?(d(),i(M,{key:0,load:e.loadList},null,8,["load"])):g("",!0),e.permission("service.create")?(d(),i(B,{key:1,onCreateOrUpdate:e.create,onCancel:e.returnCreate,load:e.loadCreate},null,8,["onCreateOrUpdate","onCancel","load"])):g("",!0)]),_:1}))}});export{$e as default};
