import{j as p,m as h,c as e,k as g,l as r,n as l,_ as f,a2 as w,S as _,a4 as i,W as k,V as d,u as n,q as v}from"./index.e62267ef.js";import{_ as u,I as m,a as c}from"./Input.a624968e.js";import{r as $}from"./MailIcon.80930334.js";import{r as b}from"./LockClosedIcon.3ab1f02c.js";function F(s,o){return p(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})])}const V={class:"grid gap-6"},y={class:"space-y-2"},L={class:"space-y-2"},j=r("div",{class:"flex items-center justify-between"},null,-1),B=r("span",null,"Entrar",-1),I=new _,C={inheritAttrs:!1,data(){return{loginForm:{email:"msr@gmail.com",password:"98653274",remember:!1,processing:!1}}},methods:{login(){I.postLogin("/login",{username:this.loginForm.email,password:this.loginForm.password}).then(s=>{if(!s.error)return i.set("access_token",s.access_token),i.set("isLogged",!0),i.set("roles",JSON.stringify(s.roles)),this.$store.state.user=s.user,this.$store.state.roles=s.roles,this.$store.state.isLogged=!0,this.$store.state.access_token=s.access_token,this.$router.push("/dashboard"),k({text:"Logado com sucesso.",title:"Login"}),!0;d({text:"Usu\xE1rio ou senha invalido.",title:"Login"})}).catch(s=>{console.log(s),d({text:"Falha inesperada.",title:"Falha"})})}},mounted(){this.$store.state.isLogged&&this.$router.push("/dashboard")}},S=Object.assign(C,{name:"Login",setup(s){return(o,t)=>(p(),g("form",{onSubmit:t[2]||(t[2]=w((...a)=>o.login&&o.login(...a),["prevent"]))},[r("div",V,[r("div",y,[e(u,{for:"email",value:"Email"}),e(m,null,{icon:l(()=>[e(n($),{"aria-hidden":"true",class:"w-5 h-5"})]),default:l(()=>[e(c,{withIcon:"",id:"email",type:"email",class:"block w-full",placeholder:"Email",modelValue:o.loginForm.email,"onUpdate:modelValue":t[0]||(t[0]=a=>o.loginForm.email=a),required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"])]),_:1})]),r("div",L,[e(u,{for:"password",value:"Password"}),e(m,null,{icon:l(()=>[e(n(b),{"aria-hidden":"true",class:"w-5 h-5"})]),default:l(()=>[e(c,{withIcon:"",id:"password",type:"password",class:"block w-full",placeholder:"Password",modelValue:o.loginForm.password,"onUpdate:modelValue":t[1]||(t[1]=a=>o.loginForm.password=a),required:"",autocomplete:"current-password"},null,8,["modelValue"])]),_:1})]),j,r("div",null,[e(f,{type:"submit",class:"justify-center w-full gap-2",disabled:o.loginForm.processing},{default:l(({iconSizeClasses:a})=>[e(n(F),{"aria-hidden":"true",class:v(a)},null,8,["class"]),B]),_:1},8,["disabled"])])])],32))}});export{S as default};
