var z=Object.defineProperty,B=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var w=(o,t,s)=>t in o?z(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,y=(o,t)=>{for(var s in t||(t={}))T.call(t,s)&&w(o,s,t[s]);if(_)for(var s of _(t))F.call(t,s)&&w(o,s,t[s]);return o},v=(o,t)=>B(o,N(t));import{_ as O}from"./PageWrapper.6420503f.js";import{_ as k,G as P,f as U,S as x,r as D,j as u,k as m,l as e,w as l,U as d,E as f,F as V,R as A,c as S,B as g,b as q,V as C,e as i,W as M,X as R,Y as G,m as p,n as h,q as K}from"./index.e62267ef.js";import{P as I}from"./moment.c32dae88.js";const L=new x,W={data(){return{dataCustomer:[],search:""}},components:{Buttons:k,Pagination:I},computed:v(y({},P(["permission"])),{getAnddress:function(){return(o,t=!0)=>{let s=o.neighborhood+" - "+o.street+" - "+o.number;return s.length>20&&t?s.slice(0,20)+"...":s}}}),methods:{searchCustomer(){setTimeout(()=>{this.customers()},500)},async customers(o="1"){let t="";o.url?t="customer?page="+o.url.split("?page=")[1]:t="customer?page="+o;let s="";return this.search.split("+").length>1?s=this.search.split("+")[1]:s=this.search,await L.get(t+"&search="+s).then(c=>{this.dataCustomer=c.data})},tooltipAddress(){const o=document.getElementsByClassName("tooltip-address"),t=document.getElementsByClassName("content-address"),s={placement:"bottom",triggerType:"hover"};[...o].forEach((c,r)=>{new Tooltip(c,t[r],s)})},async paginate(o){await this.customers(o),this.tooltipAddress()}},async mounted(){this.permission("customer.read")&&this.paginate(1)}},X={class:"relative overflow-x-auto shadow-md sm:rounded-lg p-2"},Y={key:0,class:"flex"},H={class:"mb-6"},J=e("label",{for:"search",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Paciente",-1),Q={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},Z=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Nome"),e("th",{scope:"col",class:"px-6 py-3"},"Contato"),e("th",{scope:"col",class:"px-6 py-3"},"CPF"),e("th",{scope:"col",class:"px-6 py-3"},"Endere\xE7o"),e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"sr-only"},"Edit")])])],-1),$={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},ee={class:"px-6 py-4"},te=e("br",null,null,-1),re={class:"px-6 py-4"},ae={class:"px-6 py-4 content-address"},oe={role:"tooltip",class:"tooltip-address inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700"},se=e("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1),le=e("td",{class:"px-6 py-4 text-right"},[e("a",{href:"#",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Edit")],-1);function de(o,t,s,c,r,n){const b=D("Pagination");return u(),m("div",X,[o.permission("customer.read")?(u(),m("div",Y,[e("div",H,[J,l(e("input",{type:"search",onKeyup:t[0]||(t[0]=(...a)=>n.searchCustomer&&n.searchCustomer(...a)),"onUpdate:modelValue":t[1]||(t[1]=a=>r.search=a),id:"search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,544),[[d,r.search]])])])):f("",!0),e("table",Q,[Z,e("tbody",null,[(u(!0),m(V,null,A(r.dataCustomer.data,a=>(u(),m("tr",{class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",key:a.id},[e("th",$,g(a.name),1),e("td",ee,[e("span",null,g(a.phone),1),te,e("span",null,g(a.email),1)]),e("td",re,g(a.cpf_cnpj),1),e("td",ae,[e("span",null,g(n.getAnddress(a)),1),e("div",oe,[q(g(n.getAnddress(a,!1))+" ",1),se])]),le]))),128))])]),S(b,{onChangePage:n.paginate,links:r.dataCustomer.links},null,8,["onChangePage","links"])])}var E=U(W,[["render",de]]);const ie=new x,ne={props:{load:{default:!0}},components:{Buttons:k},data(){return{data:{name:null,phone:null,email:null,cpf_cnpj:null,zipcode:null,street:null,number:null,complement:null,neighborhood:null,city:null,uf:null,sexo:null,birth_date:null}}},watch:{},computed:{},methods:{limpa_formul\u00E1rio_cep(){this.data.street=null,this.data.number=null,this.data.complement=null,this.data.neighborhood=null,this.data.city=null,this.data.uf=null},pesquisacep(o){o=o.target.value;var t=o.replace(/\D/g,"");if(t!=""){var s=/^[0-9]{8}$/;if(s.test(t)){let c="https://viacep.com.br/ws/"+t+"/json/";fetch(c).then(r=>r.json()).then(r=>{this.data.street=r.logradouro,this.data.complement=r.complemento,this.data.neighborhood=r.bairro,this.data.city=r.localidade,this.data.uf=r.uf}).catch(r=>{C({text:"Falha ao buscar endere\xE7o",text:"Endere\xE7o"}),console.log(r)})}else this.limpa_formul\u00E1rio_cep()}else this.limpa_formul\u00E1rio_cep()},validation(){if(console.log(this.data),this.data.name)if(this.data.birth_date)if(this.data.sexo)if(this.data.cpf_cnpj)if(this.data.email)if(this.data.phone)if(this.data.zipcode)if(this.data.street)if(this.data.number)if(this.data.neighborhood)if(this.data.neighborhood)if(this.data.city){if(!this.data.uf)return i({text:"Estado \xE9 obrigat\xF3rio!",title:"Paciente"}),!1}else return i({text:"Cidade \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Bairro \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Bairro \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"N\xFAmero \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Rua \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"CEP \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Telefone \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"E-mail \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"CPF \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Sexo \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Data de nascimento \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;else return i({text:"Nome \xE9 obrigat\xF3rio!",title:"Paciente"}),!1;return!0},createOrUpdate(){if(!this.validation())return!1;this.create()},async create(){try{(await ie.post("customer",this.data)).data.id&&(this.$emit("createOrUpdate"),M({text:"Paciente cadastrado com sucesso.",title:"Paciente"}))}catch(o){console.log(o),o.response.status!==422&&C({text:"Falha inesperada ao finalizar cadastro.",title:"Paciente"})}},cancel(){this.$emit("cancel")}},mounted:()=>{console.log()}},ue={class:"mb-6",style:{display:"flex","justify-content":"space-between"}},ce={style:{width:"35%"}},be=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Nome ",-1),ge={style:{width:"15%"}},me=e("label",{for:"birth_date",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Data de nascimento ",-1),pe={style:{width:"15%"}},fe=e("label",{for:"birth_date",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Sexo ",-1),ye=e("option",{value:"M"},"Masculino",-1),he=e("option",{value:"F"},"Feminino",-1),ke=[ye,he],xe={style:{width:"25%"}},_e=e("label",{for:"cpf_cnpj",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," CPF ",-1),we={class:"mb-6",style:{display:"flex","justify-content":"space-between"}},ve={style:{width:"35%"}},Ce=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," E-mail ",-1),Pe={style:{width:"35%"}},Ue=e("label",{for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Telefone ",-1),Ve={style:{width:"25%"}},qe=e("label",{for:"zipcode",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," CEP ",-1),Ee={class:"mb-6",style:{display:"flex","justify-content":"space-between"}},je={style:{width:"35%"}},ze=e("label",{for:"street",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Rua ",-1),Be={style:{width:"35%"}},Ne=e("label",{for:"neighborhood",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Bairro ",-1),Te={style:{width:"25%"}},Fe=e("label",{for:"zipcode",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Numero ",-1),Oe={class:"mb-6",style:{display:"flex"}},De={style:{width:"35%"},class:"mr-5"},Ae=e("label",{for:"city",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Cidade ",-1),Se={style:{width:"35%"},class:"ml-3"},Me=e("label",{for:"up",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Estado ",-1),Re={class:"mb-6"},Ge=e("label",{for:"complement",class:"block mb-2 text-sm font-medium"},"Complemento",-1),Ke={class:"mb-6"},Ie=e("label",{for:"description",class:"block mb-2 text-sm font-medium"},"Observa\xE7\xE3o",-1),Le={class:"flex items-center p-6 space-x-2 rounded-b border-t border-gray-200 dark:border-gray-600 mt-5"};function We(o,t,s,c,r,n){const b=R("mask");return u(),m(V,null,[e("form",null,[e("div",ue,[e("div",ce,[be,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.data.name=a),type:"text",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.name]])]),e("div",ge,[me,l(e("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=a=>r.data.birth_date=a),id:"birth_date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[b,"##/##/####"],[d,r.data.birth_date]])]),e("div",pe,[fe,l(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.data.sexo=a),type:"date",id:"birth_date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},ke,512),[[G,r.data.sexo]])]),e("div",xe,[_e,l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.data.cpf_cnpj=a),type:"text",id:"cpf_cnpj",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[b,"###.###.###-##"],[d,r.data.cpf_cnpj]])])]),e("div",we,[e("div",ve,[Ce,l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.data.email=a),type:"text",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.email]])]),e("div",Pe,[Ue,l(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.data.phone=a),type:"text",id:"phone",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.phone],[b,"+55 (##) #####-####"]])]),e("div",Ve,[qe,l(e("input",{onKeyup:t[6]||(t[6]=(...a)=>n.pesquisacep&&n.pesquisacep(...a)),"onUpdate:modelValue":t[7]||(t[7]=a=>r.data.zipcode=a),type:"text",id:"zipcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,544),[[b,"#####-###"],[d,r.data.zipcode]])])]),e("div",Ee,[e("div",je,[ze,l(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.data.street=a),type:"text",id:"street",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.street]])]),e("div",Be,[Ne,l(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>r.data.neighborhood=a),type:"text",id:"neighborhood",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.neighborhood]])]),e("div",Te,[Fe,l(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.data.number=a),type:"text",id:"zipcode",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.number]])])]),e("div",Oe,[e("div",De,[Ae,l(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r.data.city=a),type:"text",id:"city",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.city]])]),e("div",Se,[Me,l(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>r.data.uf=a),maxlength:"2",type:"text",id:"up",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[d,r.data.uf]])])]),e("div",Re,[Ge,l(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=a=>r.data.complement=a),id:"complement",rows:"2",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[d,r.data.complement]])]),e("div",Ke,[Ie,l(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=a=>r.data.description=a),id:"description",rows:"4",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[d,r.data.description]])])]),e("div",Le,[e("button",{"data-modal-toggle":"extralarge-modal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[15]||(t[15]=(...a)=>n.createOrUpdate&&n.createOrUpdate(...a))}," Cadastrar "),e("button",{"data-modal-toggle":"extralarge-modal",type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",onClick:t[16]||(t[16]=(...a)=>n.cancel&&n.cancel(...a))}," Voltar ")])],64)}var j=U(ne,[["render",We]]);const Xe={class:"p-4 sm:p-6"},Ye=e("h2",{class:"text-xl font-semibold leading-tight"},"Pacientes",-1),He=q(" Cadastar Paciente ");new x;const Je={components:{Index:E,Create:j},data(){return{inCreate:!1}},computed:y({},P(["permission"])),methods:{create(){this.inCreate=!1},returnCreate(){this.inCreate=!1}}},tt=Object.assign(Je,{name:"Customer",setup(o){return(t,s)=>(u(),p(O,null,{header:h(()=>[e("div",Xe,[Ye,!t.inCreate&&t.permission("customer.create")?(u(),p(k,{key:0,variant:"info",class:K("float-right mb-3"),onClick:s[0]||(s[0]=c=>t.inCreate=!t.inCreate)},{default:h(()=>[He]),_:1})):f("",!0)])]),default:h(()=>[t.inCreate?f("",!0):(u(),p(E,{key:0})),t.inCreate&&t.permission("customer.create")?(u(),p(j,{key:1,onCreateOrUpdate:t.create,onCancel:t.returnCreate},null,8,["onCreateOrUpdate","onCancel"])):f("",!0)]),_:1}))}});export{tt as default};
